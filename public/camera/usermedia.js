// Generated by CoffeeScript 1.4.0
(function() {
  var fallback, getUserMedia, got_camera, hasGetUserMedia, not_supported, show_msg;

  window.URL = window.URL || window.webkitURL;

  getUserMedia = function(options, success, error) {
    getUserMedia = window.navigator.getUserMedia || window.navigator.mozGetUserMedia || window.navigator.webkitGetUserMedia || function(options, success, error) {
      return error();
    };
    return getUserMedia.call(window.navigator, options, success, error);
  };

  hasGetUserMedia = function() {
    return navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
  };

  not_supported = function() {
    return show_msg("We're using cool stuff, so you need to move to a decent browser, like chrome.");
  };

  if (hasGetUserMedia) {
    getUserMedia({
      video: true
    }, got_camera, fallback);
  } else {
    not_supported;

  }

  got_camera = function(stream) {
    alert("ok!");
    return $("video").src = window.URL.createObjectURL(stream);
  };

  fallback = function(e) {
    alert("err: " + e);
    return show_msg("Not able to connect with your camera device, did you authorized us?");
  };

  show_msg = function(message) {
    return $("#message").html(message);
  };

}).call(this);
